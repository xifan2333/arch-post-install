#!/bin/sh
# Generate foot.ini color configuration from theme
# This script is called by switch-theme

THEME_CONFIG="$HOME/.config/theme/colors.sh"
# Use dotfiles directory if available, otherwise use actual config
if [ -d "$HOME/.dotfiles/foot/.config/foot" ]; then
    FOOT_COLORS="$HOME/.dotfiles/foot/.config/foot/colors.ini"
else
    FOOT_COLORS="$HOME/.config/foot/colors.ini"
fi

# Load theme colors
if [ -f "$THEME_CONFIG" ]; then
    . "$THEME_CONFIG"
else
    echo "Error: Theme config not found" >&2
    exit 1
fi

# Generate foot colors.ini
cat > "$FOOT_COLORS" << EOF
# Auto-generated by apply-theme-to-foot
# Do not edit manually - changes will be overwritten

[colors]
foreground=${COLOR_FG0#\#}
background=${COLOR_BG0#\#}

## Normal colors
regular0=${COLOR_BLACK#\#}
regular1=${COLOR_RED#\#}
regular2=${COLOR_GREEN#\#}
regular3=${COLOR_YELLOW#\#}
regular4=${COLOR_BLUE#\#}
regular5=${COLOR_PURPLE#\#}
regular6=${COLOR_CYAN#\#}
regular7=${COLOR_FG0#\#}

## Bright colors
bright0=${COLOR_BG3#\#}
bright1=${COLOR_RED#\#}
bright2=${COLOR_GREEN#\#}
bright3=${COLOR_YELLOW#\#}
bright4=${COLOR_BLUE#\#}
bright5=${COLOR_PURPLE#\#}
bright6=${COLOR_CYAN#\#}
bright7=${COLOR_FG1#\#}

## Selection colors
selection-foreground=${COLOR_BG0#\#}
selection-background=${COLOR_BLUE#\#}

## URLs
urls=${COLOR_BLUE#\#}
EOF

echo "Foot colors updated to match current theme"
