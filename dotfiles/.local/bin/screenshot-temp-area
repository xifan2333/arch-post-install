#!/bin/bash
# Save area screenshot to temp and copy path to clipboard

set -e
source "$HOME/.local/lib/lib-screenshot"
source "$HOME/.local/lib/lib-ui-i18n"

screenshot_check_deps

filename=$(screenshot_filename)
filepath="$TEMP_DIR/$filename"

grim -g "$(slurp)" "$filepath"
echo -n "$filepath" | wl-copy

if command -v notify-send >/dev/null 2>&1; then
    notify-send "$(msg screenshot_notify_title)" "$(msg screenshot_notify_path_copied filepath "$filepath")"
fi
