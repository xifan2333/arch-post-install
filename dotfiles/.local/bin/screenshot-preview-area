#!/bin/bash
# Take area screenshot and preview with imv

set -e
source "$HOME/.local/lib/lib-screenshot"
source "$HOME/.local/lib/lib-ui-i18n"

screenshot_check_deps

filename=$(screenshot_filename)
filepath="$TEMP_DIR/$filename"

grim -g "$(slurp)" "$filepath"
wl-copy < "$filepath"

if command -v imv >/dev/null 2>&1; then
    imv -w "$(msg screenshot_preview_window_title)" "$filepath" &
fi
